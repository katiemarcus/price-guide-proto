{"ast":null,"code":"import React,{useState}from'react';import'./Chat.css';// Import the CSS file\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Chat=()=>{const[messages,setMessages]=useState([]);const[item,setItem]=useState('');const[service,setService]=useState('');const[description,setDescription]=useState('');const itemOptions=['Top','Trousers','Skirt','Dress','Knitwear','Outerwear','Bag','Shoes','Other'];const serviceOptions=['Repair','Alteration','Other'];const handleItemClick=selectedItem=>{setItem(selectedItem);if(selectedItem==='Other'){const bespokeMessage={text:\"You'll need a bespoke quote from a Maker to get an accurate price for this. Please continue to make a booking, telling us more about your item.\",sender:'bot'};setMessages([...messages,bespokeMessage]);}};const handleServiceClick=selectedService=>{setService(selectedService);if(selectedService==='Other'){const bespokeMessage={text:\"You'll need a bespoke quote from a Maker to get an accurate price for this. Please continue to make a booking, telling more about your item.\",sender:'bot'};setMessages([...messages,bespokeMessage]);}};const sendMessage=async()=>{const newMessage={text:description,sender:'user'};setMessages([...messages,newMessage]);try{const response=await fetch('/api/get-price',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({item,service,description})});if(!response.ok){throw new Error('Network response was not ok');}const data=await response.json();const botMessage={text:data.message,sender:'bot'};setMessages([...messages,newMessage,botMessage]);}catch(error){console.error('Error:',error);const errorMessage={text:'There was an error processing your request. Please try again later.',sender:'bot'};setMessages([...messages,newMessage,errorMessage]);}finally{setDescription('');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"chat-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"selection-container\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Select Item\"}),/*#__PURE__*/_jsx(\"div\",{className:\"button-group\",children:itemOptions.map(option=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleItemClick(option),className:item===option?'selected':'',children:option},option))}),/*#__PURE__*/_jsx(\"h3\",{children:\"Select Service\"}),/*#__PURE__*/_jsx(\"div\",{className:\"button-group\",children:serviceOptions.map(option=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleServiceClick(option),className:service===option?'selected':'',children:option},option))}),item&&service&&item!=='Other'&&service!=='Other'&&/*#__PURE__*/_jsxs(\"div\",{className:\"input-container\",children:[/*#__PURE__*/_jsx(\"input\",{placeholder:\"Enter description\",value:description,onChange:e=>setDescription(e.target.value)}),/*#__PURE__*/_jsx(\"button\",{onClick:sendMessage,children:\"Send\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"messages-container\",children:messages.map((msg,index)=>/*#__PURE__*/_jsx(\"div\",{className:`message ${msg.sender}`,children:msg.text},index))})]});};export default Chat;","map":{"version":3,"names":["React","useState","jsx","_jsx","jsxs","_jsxs","Chat","messages","setMessages","item","setItem","service","setService","description","setDescription","itemOptions","serviceOptions","handleItemClick","selectedItem","bespokeMessage","text","sender","handleServiceClick","selectedService","sendMessage","newMessage","response","fetch","method","headers","body","JSON","stringify","ok","Error","data","json","botMessage","message","error","console","errorMessage","className","children","map","option","onClick","placeholder","value","onChange","e","target","msg","index"],"sources":["/Users/katie/tailoring-app/src/components/Chat.js"],"sourcesContent":["import React, { useState } from 'react';\nimport './Chat.css'; // Import the CSS file\n\nconst Chat = () => {\n  const [messages, setMessages] = useState([]);\n  const [item, setItem] = useState('');\n  const [service, setService] = useState('');\n  const [description, setDescription] = useState('');\n\n  const itemOptions = ['Top', 'Trousers', 'Skirt', 'Dress', 'Knitwear', 'Outerwear', 'Bag', 'Shoes', 'Other'];\n  const serviceOptions = ['Repair', 'Alteration', 'Other'];\n\n  const handleItemClick = (selectedItem) => {\n    setItem(selectedItem);\n    if (selectedItem === 'Other') {\n      const bespokeMessage = {\n        text: \"You'll need a bespoke quote from a Maker to get an accurate price for this. Please continue to make a booking, telling us more about your item.\",\n        sender: 'bot'\n      };\n      setMessages([...messages, bespokeMessage]);\n    }\n  };\n\n  const handleServiceClick = (selectedService) => {\n    setService(selectedService);\n    if (selectedService === 'Other') {\n      const bespokeMessage = {\n        text: \"You'll need a bespoke quote from a Maker to get an accurate price for this. Please continue to make a booking, telling more about your item.\",\n        sender: 'bot'\n      };\n      setMessages([...messages, bespokeMessage]);\n    }\n  };\n\n  const sendMessage = async () => {\n    const newMessage = { text: description, sender: 'user' };\n    setMessages([...messages, newMessage]);\n\n    try {\n      const response = await fetch('/api/get-price', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ item, service, description }),\n      });\n\n      if (!response.ok) {\n        throw new Error('Network response was not ok');\n      }\n\n      const data = await response.json();\n      const botMessage = { text: data.message, sender: 'bot' };\n      setMessages([...messages, newMessage, botMessage]);\n    } catch (error) {\n      console.error('Error:', error);\n      const errorMessage = { text: 'There was an error processing your request. Please try again later.', sender: 'bot' };\n      setMessages([...messages, newMessage, errorMessage]);\n    } finally {\n      setDescription('');\n    }\n  };\n\n  return (\n    <div className=\"chat-container\">\n      <div className=\"selection-container\">\n        <h3>Select Item</h3>\n        <div className=\"button-group\">\n          {itemOptions.map((option) => (\n            <button\n              key={option}\n              onClick={() => handleItemClick(option)}\n              className={item === option ? 'selected' : ''}\n            >\n              {option}\n            </button>\n          ))}\n        </div>\n        <h3>Select Service</h3>\n        <div className=\"button-group\">\n          {serviceOptions.map((option) => (\n            <button\n              key={option}\n              onClick={() => handleServiceClick(option)}\n              className={service === option ? 'selected' : ''}\n            >\n              {option}\n            </button>\n          ))}\n        </div>\n        {(item && service) && item !== 'Other' && service !== 'Other' && (\n          <div className=\"input-container\">\n            <input\n              placeholder=\"Enter description\"\n              value={description}\n              onChange={(e) => setDescription(e.target.value)}\n            />\n            <button onClick={sendMessage}>Send</button>\n          </div>\n        )}\n      </div>\n      <div className=\"messages-container\">\n        {messages.map((msg, index) => (\n          <div key={index} className={`message ${msg.sender}`}>\n            {msg.text}\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n};\n\nexport default Chat;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}